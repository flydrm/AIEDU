# 发布流程（对齐SOP）

文档版本: v1.0  
创建日期: 2025-09-03  
作者: 架构助手  
审核人: 待定

## 1. 版本规划
- 版本号：语义化 x.y.z
- 周期：MVP 4周；后续功能版2–4周；修复版按需

## 2. 功能冻结
- 条件：计划功能完成并合入release分支；仅允许Bug修复
- 分支：release/x.y.z；更新versionCode/versionName

## 3. 测试验证
- 功能/回归/边界/异常；兼容（7/8/10/12/14）；设备（小/中/大屏/平板）
- 性能：启动≤2.5s；内存≤350MB；无ANR；电量正常
- 自动化：test/connectedAndroidTest；jacoco覆盖率

## 4. 构建与签名
- assembleRelease / bundleRelease；Proguard与签名配置
- 产物：APK/AAB、mapping.txt、符号文件

## 5. 发布策略
- 灰度：5%→20%→50%→100%，观察崩溃/ANR/关键指标
- 回滚：保留上版APK/AAB；数据库迁移回退脚本

## 6. 监控与告警
- Crashlytics/性能监控；埋点指标：首卡完成率、再试一次率、红色曝光/完成差异
- SLA：chat P95≤3s；embed/rerank P95≤800ms；成功率≥99%

## 7. 发布材料
- 版本说明：改动/修复/已知问题
- 截图/视频：商店物料与无障碍说明
- 合规材料：隐私政策、儿童监护声明、权限用途说明

## 8. 发布后复盘
- 数据对比：留存/时长/完成率/崩溃
- 问题清单与行动项：性能、稳定、内容产能、AI成本

