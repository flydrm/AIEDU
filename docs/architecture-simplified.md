# 精简版架构设计（自用MVP）

文档版本: v1.0  
创建日期: 2025-01-03  
作者: 架构助手

## 1. 架构理念

### 1.1 核心原则
- **够用就好**：不过度设计
- **简单直接**：能直接写就不要抽象
- **快速迭代**：2周上线，持续改进

### 1.2 技术决策
```
❌ 不用的：
- Clean Architecture (过度设计)
- 依赖注入 (增加复杂度)
- 多模块 (没必要)
- Room Database (杀鸡用牛刀)
- Compose UI (学习成本)

✅ 使用的：
- 单Activity + 简单View
- SharedPreferences
- 直接的类实例化
- 资源文件内置
```

## 2. 极简架构图

```
┌─────────────────────────────────┐
│      MainActivity               │
│  - 显示卡片                      │
│  - 处理点击                      │  
│  - 播放音频                      │
│  - 保存进度                      │
└─────────────────────────────────┘
         │
         ├── Card (数据类)
         ├── Progress (进度管理)
         └── Resources (图片/音频)
```

就这么简单！

## 3. 文件结构

```
app/src/main/
├── java/com/family/kidsedu/
│   ├── MainActivity.kt      # 主界面 (300行)
│   ├── Card.kt             # 数据模型 (10行)
│   └── Progress.kt         # 进度管理 (50行)
├── res/
│   ├── layout/
│   │   └── activity_main.xml
│   ├── drawable/           # 卡片图片
│   │   ├── card_01_fire_truck.png
│   │   ├── card_02_number_1.png
│   │   └── ...
│   ├── raw/               # 音频文件
│   │   ├── audio_01.mp3
│   │   ├── audio_02.mp3
│   │   └── ...
│   └── values/
│       ├── colors.xml
│       └── strings.xml
```

## 4. 核心组件说明

### 4.1 MainActivity
```kotlin
职责：
- 管理卡片显示流程
- 处理用户交互
- 控制音频播放
- 管理学习进度

不做的：
- 复杂的状态管理
- 网络请求
- 数据库操作
```

### 4.2 数据存储
```kotlin
// 只存储这3个数据
SharedPreferences:
- current_card: Int        // 当前卡片索引
- play_time_20250103: Int  // 今日学习时长
- total_cards_done: Int    // 总完成数（可选）
```

### 4.3 资源管理
```
图片命名规范：
card_01_fire_truck.png    # 卡片序号_内容描述

音频命名规范：
audio_01.mp3              # 对应card_01

保持简单的对应关系！
```

## 5. 数据流

```
用户点击 
  ↓
MainActivity处理点击
  ↓
播放奖励动画
  ↓
更新进度 (SharedPreferences)
  ↓
显示下一张卡片
```

## 6. 扩展点（未来可能）

### 6.1 短期（1-2个月）
```kotlin
// 可以直接在MainActivity中添加
- 简单的卡片分类选择
- 查看历史学习记录
- 添加背景音乐开关
```

### 6.2 中期（3-6个月）
```kotlin
// 可能需要重构的
- 多种互动方式（拖拽）
- 简单的学习报告
- 导入外部内容包
```

## 7. 不做的事情

### 7.1 永远不做
- 用户登录系统
- 云端同步
- 社交功能
- 广告/内购

### 7.2 暂时不做
- 复杂的推荐算法
- 详细的数据分析
- 多用户支持
- 网络下载内容

## 8. 性能考虑

### 8.1 启动性能
```kotlin
// 够快就行
- 冷启动 < 3秒
- 没有网络请求
- 没有复杂初始化
```

### 8.2 内存使用
```kotlin
// 注意及时释放
- MediaPlayer使用后release
- 大图片使用合适尺寸
- 及时移除Handler回调
```

## 9. 维护建议

### 9.1 添加新卡片
```kotlin
// 1. 添加图片到 drawable/
// 2. 添加音频到 raw/
// 3. 在MainActivity中添加到cards列表
cards.add(Card(
    id = 21,
    title = "新内容",
    imageResId = R.drawable.card_21_new,
    audioResId = R.raw.audio_21
))
```

### 9.2 修改逻辑
- 直接在MainActivity中修改
- 不要过度抽象
- 保持代码可读性

## 10. 架构优势

### 10.1 简单的好处
- **易理解**：新手也能快速上手
- **易调试**：代码路径清晰
- **易修改**：想改哪里改哪里
- **易部署**：一个APK搞定

### 10.2 适合场景
- 自用工具
- 快速验证想法
- 小规模应用
- 有限功能集

## 总结

这个精简架构：
- 总代码量 < 500行
- 2周完成开发
- 维护成本极低
- 随时可以重写

**记住：完成比完美更重要！**